{"id":"6Rw9","dependencies":[{"name":"/Users/philkunz/gitlab/pushrocks_meta/webdetector/node_modules/@pushrocks/lik/ts/lik.interestmap.interest.ts","includedInParent":true,"mtime":499162500000},{"name":"/Users/philkunz/gitlab/pushrocks_meta/webdetector/package.json","includedInParent":true,"mtime":1545395749058},{"name":"/Users/philkunz/gitlab/pushrocks_meta/webdetector/node_modules/@pushrocks/lik/package.json","includedInParent":true,"mtime":1545395355371},{"name":"./lik.plugins","loc":{"line":3,"column":24},"parent":"/Users/philkunz/gitlab/pushrocks_meta/webdetector/node_modules/@pushrocks/lik/dist/lik.interestmap.interest.js","resolved":"/Users/philkunz/gitlab/pushrocks_meta/webdetector/node_modules/@pushrocks/lik/dist/lik.plugins.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e=require(\"./lik.plugins\");class t{constructor(t,s,i){this.destructionTimer=new e.smarttime.Timer(1e4),this.isFullfilled=!1,this.fullfillmentStore=[],this.interestDeferred=new e.smartpromise.Deferred,this.interestFullfilled=this.interestDeferred.promise,this.originalInterest=s,this.comparisonFunc=i,this.interestMapRef=t,this.destructionTimer.completed.then(()=>{this.destroy()})}get comparisonString(){return this.comparisonFunc(this.originalInterest)}fullfillInterest(e){this.isFullfilled=!0,this.fullfillmentStore=[],this.interestDeferred.resolve(e)}destroy(){this.interestMapRef.removeInterest(this)}markLost(){this.destructionTimer.start()}renew(){this.destructionTimer.reset()}}exports.Interest=t;","map":{"mappings":[{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":68}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":74}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":76}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":84}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":101}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":5,"column":13},"generated":{"line":1,"column":107}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":41,"column":2},"generated":{"line":1,"column":109}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":42,"column":4},"generated":{"line":1,"column":121}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":123}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":1,"column":125}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":9,"column":9},"generated":{"line":1,"column":128}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":9,"column":9},"generated":{"line":1,"column":133}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":9,"column":28},"generated":{"line":1,"column":150}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":9,"column":32},"generated":{"line":1,"column":154}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":9,"column":40},"generated":{"line":1,"column":156}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":9,"column":50},"generated":{"line":1,"column":166}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":9,"column":56},"generated":{"line":1,"column":172}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":10,"column":9},"generated":{"line":1,"column":177}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":10,"column":9},"generated":{"line":1,"column":182}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":10,"column":24},"generated":{"line":1,"column":196}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":15,"column":9},"generated":{"line":1,"column":198}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":15,"column":9},"generated":{"line":1,"column":203}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":15,"column":36},"generated":{"line":1,"column":221}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":24,"column":10},"generated":{"line":1,"column":224}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":24,"column":10},"generated":{"line":1,"column":229}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":26,"column":6},"generated":{"line":1,"column":246}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":1,"column":250}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":26,"column":18},"generated":{"line":1,"column":252}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":26,"column":31},"generated":{"line":1,"column":265}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":1,"column":274}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":1,"column":279}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":27,"column":30},"generated":{"line":1,"column":298}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":27,"column":35},"generated":{"line":1,"column":303}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":27,"column":52},"generated":{"line":1,"column":320}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":46,"column":4},"generated":{"line":1,"column":328}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":1,"column":333}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":46,"column":28},"generated":{"line":1,"column":350}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":1,"column":352}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":357}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":1,"column":372}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":1,"column":374}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":48,"column":9},"generated":{"line":1,"column":379}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":48,"column":26},"generated":{"line":1,"column":394}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":49,"column":4},"generated":{"line":1,"column":396}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":49,"column":9},"generated":{"line":1,"column":401}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":49,"column":26},"generated":{"line":1,"column":418}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":49,"column":36},"generated":{"line":1,"column":428}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":49,"column":41},"generated":{"line":1,"column":433}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":50,"column":6},"generated":{"line":1,"column":438}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":443}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":455}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":478}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":21,"column":11},"generated":{"line":1,"column":485}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":21,"column":16},"generated":{"line":1,"column":490}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":505}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":21,"column":36},"generated":{"line":1,"column":510}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":32,"column":9},"generated":{"line":1,"column":528}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":32,"column":26},"generated":{"line":1,"column":545}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":1,"column":548}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":33,"column":9},"generated":{"line":1,"column":553}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":33,"column":24},"generated":{"line":1,"column":567}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":1,"column":569}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":574}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":34,"column":29},"generated":{"line":1,"column":592}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":35,"column":4},"generated":{"line":1,"column":595}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":35,"column":9},"generated":{"line":1,"column":600}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":35,"column":26},"generated":{"line":1,"column":617}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":35,"column":34},"generated":{"line":1,"column":625}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":61,"column":9},"generated":{"line":1,"column":628}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":62,"column":4},"generated":{"line":1,"column":638}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":62,"column":9},"generated":{"line":1,"column":643}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":62,"column":24},"generated":{"line":1,"column":658}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":62,"column":39},"generated":{"line":1,"column":673}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":68,"column":9},"generated":{"line":1,"column":679}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":690}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":69,"column":9},"generated":{"line":1,"column":695}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":69,"column":26},"generated":{"line":1,"column":712}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":1,"column":720}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":728}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":76,"column":9},"generated":{"line":1,"column":733}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":76,"column":26},"generated":{"line":1,"column":750}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":759}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":767}},{"source":"../ts/lik.interestmap.interest.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":776}}],"sources":{"../ts/lik.interestmap.interest.ts":"import * as plugins from './lik.plugins';\n\nimport { InterestMap, IInterestComparisonFunc } from './lik.interestmap';\n\nexport class Interest<DTInterestId, DTInterestFullfillment> {\n  private interestMapRef: InterestMap<DTInterestId, DTInterestFullfillment>;\n  public originalInterest: DTInterestId;\n  public comparisonFunc: IInterestComparisonFunc<DTInterestId>;\n  public destructionTimer = new plugins.smarttime.Timer(10000);\n  public isFullfilled = false;\n\n  /**\n   * a generic store to store objects in that are needed for fullfillment;\n   */\n  public fullfillmentStore: any[] = [];\n\n  /**\n   * quick access to a string that makes the interest comparable for checking for similar interests\n   */\n  public get comparisonString() {\n    return this.comparisonFunc(this.originalInterest);\n  }\n\n  private interestDeferred: plugins.smartpromise.Deferred<\n    DTInterestFullfillment\n  > = new plugins.smartpromise.Deferred();\n  public interestFullfilled = this.interestDeferred.promise;\n\n  /**\n   * fullfill the interest\n   */\n  public fullfillInterest(objectArg: DTInterestFullfillment) {\n    this.isFullfilled = true;\n    this.fullfillmentStore = [];\n    this.interestDeferred.resolve(objectArg);\n  }\n\n  /**\n   *\n   */\n  constructor(\n    interestMapArg: InterestMap<DTInterestId, DTInterestFullfillment>,\n    interestArg: DTInterestId,\n    comparisonFuncArg: IInterestComparisonFunc<DTInterestId>\n  ) {\n    this.originalInterest = interestArg;\n    this.comparisonFunc = comparisonFuncArg;\n    this.interestMapRef = interestMapArg;\n    this.destructionTimer.completed.then(() => {\n      this.destroy();\n    });\n  }\n\n  // ===============================\n  // LIFECYCLE MANAGEMENT\n  // ===============================\n\n  /**\n   * self destructs the interest\n   */\n  public destroy() {\n    this.interestMapRef.removeInterest(this);\n  }\n\n  /**\n   * notifies the interest that the interest in it has been lost\n   */\n  public markLost() {\n    this.destructionTimer.start();\n  }\n\n  /**\n   * notifies the interest that the interest in it has been restored\n   */\n  public renew() {\n    this.destructionTimer.reset();\n  }\n}\n"},"lineCount":null}},"hash":"d4b00c62ad5ec8abd326f34cd869b732","cacheData":{"env":{}}}